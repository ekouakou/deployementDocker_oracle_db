-- Création du schéma (optionnel)
CREATE USER elax_db IDENTIFIED BY elaxnkm;

-- Accorder les privilèges à l'utilisateur
GRANT CONNECT, RESOURCE, CREATE SESSION TO elax_db;

-- Utiliser le schéma créé
ALTER SESSION SET CURRENT_SCHEMA = elax_db;

-- Création de la table EMPLOYEES
CREATE TABLE EMPLOYEES (
    EMPLOYEE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FIRST_NAME VARCHAR2(50),
    LAST_NAME VARCHAR2(50),
    EMAIL VARCHAR2(100) UNIQUE,
    HIRE_DATE DATE DEFAULT SYSDATE,
    JOB_ID NUMBER,
    SALARY NUMBER(10, 2),
    MANAGER_ID NUMBER,
    DEPARTMENT_ID NUMBER
);

-- Création de la table DEPARTMENTS
CREATE TABLE DEPARTMENTS (
    DEPARTMENT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DEPARTMENT_NAME VARCHAR2(100) NOT NULL
);

-- Création de la table JOBS
CREATE TABLE JOBS (
    JOB_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    JOB_TITLE VARCHAR2(100) NOT NULL,
    MIN_SALARY NUMBER(10, 2),
    MAX_SALARY NUMBER(10, 2)
);

-- Ajout de contraintes FK
ALTER TABLE EMPLOYEES ADD CONSTRAINT FK_EMPLOYEES_DEPARTMENTS
    FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENTS(DEPARTMENT_ID);

ALTER TABLE EMPLOYEES ADD CONSTRAINT FK_EMPLOYEES_JOBS
    FOREIGN KEY (JOB_ID) REFERENCES JOBS(JOB_ID);

ALTER TABLE EMPLOYEES ADD CONSTRAINT FK_EMPLOYEES_MANAGER
    FOREIGN KEY (MANAGER_ID) REFERENCES EMPLOYEES(EMPLOYEE_ID);

-- Insertion de données dans DEPARTMENTS
INSERT INTO DEPARTMENTS (DEPARTMENT_NAME) VALUES ('Human Resources');
INSERT INTO DEPARTMENTS (DEPARTMENT_NAME) VALUES ('Engineering');
INSERT INTO DEPARTMENTS (DEPARTMENT_NAME) VALUES ('Marketing');

-- Insertion de données dans JOBS
INSERT INTO JOBS (JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES ('Software Engineer', 50000, 100000);
INSERT INTO JOBS (JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES ('Manager', 80000, 150000);
INSERT INTO JOBS (JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES ('HR Specialist', 40000, 80000);

-- Insertion de données dans EMPLOYEES
INSERT INTO EMPLOYEES (FIRST_NAME, LAST_NAME, EMAIL, JOB_ID, SALARY, DEPARTMENT_ID)
VALUES ('John', 'Doe', 'john.doe@example.com', 1, 60000, 2);

INSERT INTO EMPLOYEES (FIRST_NAME, LAST_NAME, EMAIL, JOB_ID, SALARY, MANAGER_ID, DEPARTMENT_ID)
VALUES ('Jane', 'Smith', 'jane.smith@example.com', 2, 90000, 1, 2);

INSERT INTO EMPLOYEES (FIRST_NAME, LAST_NAME, EMAIL, JOB_ID, SALARY, DEPARTMENT_ID)
VALUES ('Alice', 'Brown', 'alice.brown@example.com', 3, 70000, 3);

-- Vérification des données insérées
SELECT * FROM EMPLOYEES;
SELECT * FROM DEPARTMENTS;
SELECT * FROM JOBS;
